# ==========================================
# MÓDULO CESTA DE PREÇOS - CONFIGURAÇÃO
# ==========================================
# Versão: 1.0.0
# Data: 31/10/2025
# Ver TENANTS.md para configuração por tenant

# ==========================================
# APLICAÇÃO
# ==========================================
APP_NAME="Cesta de Preços"
APP_ENV=production                    # local, development, production
APP_KEY=                              # Gerar com: php artisan key:generate
APP_DEBUG=false                       # SEMPRE false em produção
APP_TIMEZONE=America/Sao_Paulo
APP_URL=http://localhost:8001

APP_LOCALE=pt_BR
APP_FALLBACK_LOCALE=pt_BR
APP_FAKER_LOCALE=pt_BR

APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

PHP_CLI_SERVER_WORKERS=4

BCRYPT_ROUNDS=12

# ==========================================
# LOGS
# ==========================================
LOG_CHANNEL=daily                     # single, daily, stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug                       # debug, info, warning, error
LOG_DAILY_DAYS=7                      # Rotação de logs (dias)

# ==========================================
# BANCO DE DADOS - PRINCIPAL
# ==========================================
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=minhadattatech_db         # Banco compartilhado entre tenants
DB_USERNAME=minhadattatech_user
DB_PASSWORD=MinhaDataTech2024SecureDB # ALTERAR em produção!
DB_TABLE_PREFIX=cp_                   # Prefixo das tabelas deste módulo

# ==========================================
# TENANT - CONFIGURAÇÃO
# ==========================================
# Descomentar e configurar conforme o tenant:

# TENANT: Catas Altas - MG
# DB_TENANT_ID=catasaltas
# DB_DATABASE=catasaltas_db
# TENANT_NOME="Prefeitura Municipal de Catas Altas"
# TENANT_UF=MG
# TENANT_MUNICIPIO="Catas Altas"

# TENANT: DattaTech - Desenvolvimento
# DB_TENANT_ID=dattatech
# DB_DATABASE=dattatech_db
# TENANT_NOME="DattaTech - Desenvolvimento"
# TENANT_UF=
# TENANT_MUNICIPIO=

# TENANT: Gurupi - TO
# DB_TENANT_ID=gurupi
# DB_DATABASE=gurupi_db
# TENANT_NOME="Prefeitura Municipal de Gurupi"
# TENANT_UF=TO
# TENANT_MUNICIPIO="Gurupi"

# TENANT: Nova Laranjeiras - PR
# DB_TENANT_ID=novalaranjeiras
# DB_DATABASE=novalaranjeiras_db
# TENANT_NOME="Prefeitura Municipal de Nova Laranjeiras"
# TENANT_UF=PR
# TENANT_MUNICIPIO="Nova Laranjeiras"

# TENANT: Nova Roma - GO
# DB_TENANT_ID=novaroma
# DB_DATABASE=novaroma_db
# TENANT_NOME="Prefeitura Municipal de Nova Roma"
# TENANT_UF=GO
# TENANT_MUNICIPIO="Nova Roma"

# TENANT: Pirapora - MG
# DB_TENANT_ID=pirapora
# DB_DATABASE=pirapora_db
# TENANT_NOME="Prefeitura Municipal de Pirapora"
# TENANT_UF=MG
# TENANT_MUNICIPIO="Pirapora"

# Configurações de Sessão (necessárias para funcionamento em iframe)
SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
# Path específico do proxy para que o cookie seja aceito no contexto correto
SESSION_PATH=/module-proxy/price_basket
# Domain vazio = relativo ao domínio atual (necessário para iframe)
SESSION_DOMAIN=
SESSION_TABLE=sessions
# Configurações para permitir cookies em iframe (cross-origin)
SESSION_SAME_SITE=none
SESSION_SECURE_COOKIE=true
SESSION_PARTITIONED_COOKIE=true
SESSION_HTTP_ONLY=true

BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local
QUEUE_CONNECTION=database

CACHE_STORE=database
CACHE_PREFIX=

MEMCACHED_HOST=127.0.0.1

REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

# ==========================================
# EMAIL
# ==========================================
MAIL_MAILER=smtp                      # smtp, sendmail, mailgun, ses, log
MAIL_SCHEME=null
MAIL_HOST=127.0.0.1                   # Servidor SMTP
MAIL_PORT=25                          # 25, 587, 465
MAIL_USERNAME=null                    # Usuário SMTP (se necessário)
MAIL_PASSWORD=null                    # Senha SMTP (se necessário)
MAIL_ENCRYPTION=null                  # null, tls, ssl
MAIL_FROM_ADDRESS="suporte@dattatech.com.br"
MAIL_FROM_NAME="${APP_NAME}"

# ==========================================
# APIs GOVERNAMENTAIS
# ==========================================

# PNCP - Portal Nacional de Contratações Públicas
# Não requer autenticação, apenas configurar timeouts
PNCP_CONNECT_TIMEOUT=5                # Timeout de conexão (segundos)
PNCP_TIMEOUT=20                       # Timeout de resposta (segundos)

# Compras.gov - Preços de Mercado
# Não requer autenticação
# Configurações automáticas no código

# Portal da Transparência (CGU)
# Requer chave de API (solicitar em: http://www.portaltransparencia.gov.br/api-de-dados)
PORTALTRANSPARENCIA_API_KEY=          # Sua chave de API aqui

# CATMAT - Catálogo de Materiais
# Dados locais, sem API externa
# Sincronizar com: php artisan importar:catmat

# CMED - Medicamentos
# Dados locais, importados de planilhas Excel
# Sincronizar com: php artisan importar:cmed

# Licitacon
# Dados locais
# Sincronizar com: php artisan licitacon:sincronizar

# ==========================================
# CONFIGURAÇÕES OPCIONAIS
# ==========================================

# OCR - Tesseract
# Instalar: sudo apt-get install tesseract-ocr tesseract-ocr-por
# Usado para leitura de PDFs escaneados
TESSERACT_PATH=/usr/bin/tesseract

# PDF - Geração
# Biblioteca padrão: mPDF
# Configurações automáticas

# Planilhas - Excel/CSV
# Biblioteca padrão: PhpSpreadsheet
# Configurações automáticas

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

VITE_APP_NAME="${APP_NAME}"
